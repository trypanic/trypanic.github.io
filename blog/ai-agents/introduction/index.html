<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>How to Build an Basic CLI AI Agent with Golang</title>
		<meta name="description" content="AI agent, comenzaremos con interacciones básicas con un modelo de lenguaje grande (LLM) y progresaremos gradualmente hacia un agente de IA más completo ...">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="try panic blog | computer science | software engineering">
		<link rel="stylesheet" href="/css/index.css">
	</head>
	<body>
		<header>
			<div class="logo">
				<a href="/">try<span>panic</span></a>
			</div>
			<div class="nav">
				<nav>
						<a class="nav-item" href="/">Home</a>
						<a class="nav-item" href="/archive/">Archive</a>
						<a class="nav-item" href="/about/">About</a>
						<a class="nav-item" href="/feed/feed.xml">Feed</a>
				</nav>
			</div>
		</header>
		<main id="main">
			<style>
	:root{--bg:#1d2021;--fg:#ebdbb2;--dark0_hard:#1d2021;--dark0:#282828;--dark1:#3c3836;--dark2:#504945;--dark3:#665c54;--dark4:#7c6f64;--gray:#928374;--light0_hard:#f9f5d7;--light0:#ebdbb2;--light1:#ebdbb2;--light2:#d5c4a1;--light3:#bdae93;--light4:#a89984;--bright_red:#fb4934;--bright_green:#b8bb26;--bright_yellow:#fabd2f;--bright_blue:#83a598;--bright_purple:#d3869b;--bright_aqua:#8ec07c;--bright_orange:#fe8019}.token{color:var(--light0_hard);font-size:12px;font-weight:500}pre[class*=language-]{background:var(--bg);color:var(--light0_hard);padding:1em;border-radius:.3em;overflow:auto;font-feature-settings:"liga" 0}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:var(--dark4);font-style:italic}.token.string{color:var(--bright_green)}.token.keyword{color:var(--bright_red)}.token.type{color:var(--bright_aqua)}.token.function{color:var(--bright_aqua)}.token.boolean{color:var(--bright_purple)}.token.nil{color:var(--bright_orange)}.token.number{color:var(--bright_purple)}.token.operator{color:var(--light0)}.token.operator-assignment{color:var(--light0)}.token.operator-channel-left,.token.operator-channel-right{color:var(--bright_orange)}.token.punctuation{color:var(--light0)}.token.tag{color:var(--bright_blue)}.token.interface-method .function{color:var(--bright_aqua)}.token.channel .keyword,.token.map .keyword,.token.slice .punctuation{color:var(--light0)}.token.channel .type,.token.map .type,.token.slice .type{color:var(--bright_aqua)}.token.identifier{color:var(--bright_blue)}.token.namespace{color:var(--light2)}.token.class-name,.token.structure-name{color:var(--bright_purple)}.token.property{color:var(--bright_yellow)}.token.namespace{opacity:1}
</style>
<div class="post-title">
	<h1 id="how-to-build-an-basic-cli-ai-agent-with-golang">How to Build an Basic CLI AI Agent with Golang</h1>
</div>
<div class="post-content">
	<h1 id="introduction">Introduction</h1>
<p>This post is the first in a series where I'll share my personal journey of learning how to build an AI Agent from scratch using Golang. It’s heavily inspired by <a href="https://ampcode.com/how-to-build-an-agent">How to Build an Agent</a> by <a href="https://thorstenball.com/">Thorsten Ball</a>, but with a different perspective and target: a more general-purpose agent rather than one focused specifically on code editing.</p>
<p>We'll begin with basic interactions with a large language model (LLM) and gradually progress toward a more complete AI Agent by incorporating tools, memory, MCP (Model Context Protocol), and more.</p>
<p>My goal is to share everything I’ve learned about how AI agents work under the hood, and to make that understanding accessible to others who are interested in the same topic.</p>
<br>
<p><strong><em>Disclaimer</em></strong>: I'm not an expert in AI Agents, LLMs, ML, and AI in general. So, this series is based on my personal learning journey, and everything I share comes from reading, research, and hands-on experimentation. Use it as a learning resource. The code examples is just for educational purposes and are not production-ready.</p>
<br>
<p>If you see any mistakes or have suggestions for improvement, I'd really appreciate your feedback!</p>
<h2 id="what-is-an-ai-agent">What is an AI Agent?</h2>
<p>According to Google:</p>
<blockquote>
<p>AI agents are software systems that use AI to pursue goals and complete tasks on behalf of users. They show reasoning, planning, and memory and have a level of autonomy to make decisions, learn, and adapt.</p>
</blockquote>
<p>According to Anthropic:</p>
<blockquote>
<p>&quot;Agent&quot; can be defined in several ways. Some customers define agents as fully autonomous systems that operate independently over extended periods, using various tools to accomplish complex tasks. Others use the term to describe more prescriptive implementations that follow predefined workflows.</p>
</blockquote>
<p>Both are very clear explanations of what an AI Agent is. But to truly understand it in depth, what's going on under the hood, let's break it all down from scratch. After exploring the concepts step by step, I'll share my own perspective. Then, you'll have enough context to define what an AI Agent really means in your own words.</p>
<h2 id="a-simple-interaction-with-a-llm-one-input-one-output">A simple interaction with a LLM (one input, one output)</h2>
<p>Let's start with the most basic form of interaction: you send a message to a LLM through Anthropic API using the Anthropic SDK (you can use your preferred programming language). The API responds with a generated message.</p>
<pre class="mermaid">sequenceDiagram
   Client (Anthropic SDK)-&#x3E;&#x3E;Anthropic API: prompt
   Anthropic API--&#x3E;&#x3E;Client (Anthropic SDK): response
</pre>
<p>For example, you might send: <code>&quot;Hello, how are you?&quot;</code></p>
<p>And the model might respond with: <code>&quot;I'm doing well, thank you!&quot;</code></p>
<p>Here's what that looks like in Go:</p>
<pre class="language-golang" tabindex="0" data-language="golang"><code class="language-golang">
<span class="token comment">// Set your API key as an environment variable named ANTHROPIC_API_KEY</span>
<span class="token comment">// Ensure the necessary Go dependencies are installed</span>

<span class="token comment">// added code to measure the timing</span>

<span class="token keyword">package</span> <span class="token identifier">main</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string string">"context"</span>
	<span class="token string string">"fmt"</span>
	<span class="token string string">"time"</span>

	<span class="token string string">"github.com/anthropics/anthropic-sdk-go"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token identifier">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token identifier">ctx</span> <span class="token operator operator-assignment">:=</span> <span class="token chained-access"><span class="token namespace">context</span><span class="token property property">.Background</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token identifier">message</span> <span class="token operator operator-assignment">:=</span> <span class="token string string">"Hello, how are you?"</span>
	<span class="token comment">//message := "Can you tell me about the history of AI?"</span>
	<span class="token identifier">client</span> <span class="token operator operator-assignment">:=</span> <span class="token chained-access"><span class="token namespace">anthropic</span><span class="token property property">.NewClient</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// Start timing</span>
	<span class="token identifier">start</span> <span class="token operator operator-assignment">:=</span> <span class="token chained-access"><span class="token namespace">time</span><span class="token property property">.Now</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token identifier">outcome</span><span class="token punctuation">,</span> <span class="token identifier">err</span> <span class="token operator operator-assignment">:=</span> <span class="token chained-access"><span class="token namespace">client</span><span class="token structure-name class-name">.Messages</span><span class="token property property">.New</span></span><span class="token punctuation">(</span><span class="token identifier">ctx</span><span class="token punctuation">,</span> <span class="token chained-access"><span class="token namespace">anthropic</span><span class="token property property">.MessageNewParams</span></span><span class="token punctuation">{</span>
		<span class="token identifier">Model</span><span class="token punctuation">:</span>     <span class="token chained-access"><span class="token namespace">anthropic</span><span class="token property property">.ModelClaude4Sonnet20250514</span></span><span class="token punctuation">,</span>
		<span class="token identifier">MaxTokens</span><span class="token punctuation">:</span> <span class="token type">int64</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token identifier">Messages</span><span class="token punctuation">:</span> <span class="token slice"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token type">anthropic</span></span><span class="token property property">.MessageParam</span><span class="token punctuation">{</span>
			<span class="token chained-access"><span class="token namespace">anthropic</span><span class="token property property">.NewUserMessage</span></span><span class="token punctuation">(</span><span class="token chained-access"><span class="token namespace">anthropic</span><span class="token property property">.NewTextBlock</span></span><span class="token punctuation">(</span><span class="token identifier">message</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token comment">// End timing</span>
	<span class="token identifier">duration</span> <span class="token operator operator-assignment">:=</span> <span class="token chained-access"><span class="token namespace">time</span><span class="token property property">.Since</span></span><span class="token punctuation">(</span><span class="token identifier">start</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> <span class="token identifier">err</span> <span class="token operator">!=</span> <span class="token nil">nil</span> <span class="token punctuation">{</span>
		<span class="token chained-access"><span class="token namespace">fmt</span><span class="token property property">.Println</span></span><span class="token punctuation">(</span><span class="token string string">"Error:"</span><span class="token punctuation">,</span> <span class="token identifier">err</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token chained-access"><span class="token namespace">fmt</span><span class="token property property">.Printf</span></span><span class="token punctuation">(</span><span class="token string string">"Response: %+v\n"</span><span class="token punctuation">,</span> <span class="token chained-access"><span class="token namespace">outcome</span><span class="token property property">.Content</span></span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token property property">.Text</span><span class="token punctuation">)</span>
	<span class="token chained-access"><span class="token namespace">fmt</span><span class="token property property">.Printf</span></span><span class="token punctuation">(</span><span class="token string string">"Execution time: %s\n"</span><span class="token punctuation">,</span> <span class="token identifier">duration</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When you run the previous code, the response might look like:</p>
<p><img src="../img/1.webp" alt=""></p>
<p>Let’s try sending another message:</p>
<pre><code>Can you give me a summary about the history of AI?
</code></pre>
<p>Executing the code, you will get something like:</p>
<p><img src="../img/2.webp" alt=""></p>
<h3 id="observations">Observations</h3>
<ol>
<li>
<p>The response takes a few seconds to print in the console (although this is partly unrelated to the Anthropic API or its generated responses,, as we will discuss further). The first example, approximately 1.5 seconds, and the second takes approximately 10 seconds.</p>
</li>
<li>
<p>In the first example, the response is more verbose than a simple &quot;I'm doing well, thank you!&quot;. It is because the model is trying to be more helpful and informative, but it can be adjusted by changing the prompt or the model parameters (e.g., temperature, top_p, etc.).</p>
</li>
<li>
<p>During this process,the execution appears to freeze until the response is received, especially in the second example, where the delay is more evident. This is critical, as it can result in a poor user experience and create the impression that the system is unresponsive.</p>
</li>
</ol>
<br>
<p>In both cases, we see a simple interaction: <code>input → output</code>. So, is this simple interaction considered an AI Agent? You might think so, after all, you're interacting with a LLM over the Anthropic API, right? but, the short answer is absolutely not, at least, not yet!</p>
<p><strong><em>Why not?</em></strong> Because the code we've used so far only handles a single interaction with no ongoing or continuous dialogue; it doesn't retain in a memory any previous messages (stateless interaction), it doesn't take any actions on your behalf, it doesn't interact with external systems, it doesn't understanding of goals, and there is not a decision-making involved. As such, this basic interaction is not sufficient to qualify as an AI agent.</p>
<p>Agents require continuity, reasoning across steps, decision-making, and often the ability to use tools or act in different internal or externalenvironments outside of its own context.</p>
<p>Let's take a pause here and improve the previous code to enhance the user experience. In the next section, we’ll explore how to use streaming to prevent blocking behavior. Note: this part isn’t directly about LLMs or AI Agents—it's related to how we handle asynchronous operations in the programming language itself.</p>
<p>See a preview of the results:</p>
<p><img src="../img/3.webp" alt=""></p>
<p>Seems like a good start, right?</p>

</div>

<div class="post-metadata">
	<time datetime="2025-07-30">30 July 2025</time>
	<div class="post-metadata-tags">tags: &nbsp;
			<a href="/tags/ai-agents/">
				ai-agents</a>
				<span class="separator-tags">|</span>
			
			<a href="/tags/llms/">
				LLMS</a>
				<span class="separator-tags">|</span>
			
			<a href="/tags/golang/">
				golang</a>
	</div>
</div>
		<div class="links-nextprev">
				<div class="previous">&#129032 Previous<br>
					<a href="/blog/hello-world/">Hello World</a>
				</div>
			
		</div>

		</main>
		<footer>
			<p class="builtwith">
				Built with <a href="https://github.com/11ty/eleventy-base-blog">Eleventy Base Blog v9</a>
			</p>
		</footer>
		<script type="module" async="">import mermaid from "https://unpkg.com/mermaid@11.6.0/dist/mermaid.esm.min.mjs";document.addEventListener('DOMContentLoaded', mermaid.initialize({"startOnLoad":true,"theme":"neutral","loadOnSave":true}));</script>
	</body>
</html>
